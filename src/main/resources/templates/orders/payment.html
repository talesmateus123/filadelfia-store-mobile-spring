<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <div th:replace="~{layout :: head}"></div>
</head>
<body>
    <div th:replace="~{layout :: header}"></div>

    <main>
        <div class="container">
            <div th:replace="~{layout :: notifications}"></div>
            
            <!-- Success Header -->
            <div class="payment-header">
                <div class="success-icon">‚úÖ</div>
                <h1>Pedido Confirmado!</h1>
                <p class="order-number">Pedido #<span th:text="${order.orderNumber}">ORD-001</span></p>
            </div>

            <!-- Payment Information -->
            <div class="payment-container">
                <!-- Order Summary -->
                <div class="order-summary">
                    <h3>üìã Resumo do Pedido</h3>
                    
                    <div class="order-details">
                        <div class="detail-row">
                            <span>Pedido:</span>
                            <strong th:text="${order.orderNumber}">ORD-001</strong>
                        </div>
                        <div class="detail-row">
                            <span>Data:</span>
                            <span th:text="${#dates.format(order.createdAt, 'dd/MM/yyyy HH:mm')}">15/11/2025 14:30</span>
                        </div>
                        <div class="detail-row">
                            <span>Status:</span>
                            <span class="status-pending">Aguardando Pagamento</span>
                        </div>
                    </div>
                    
                    <hr>
                    
                    <div class="order-items">
                        <div th:each="item : ${order.items}" class="order-item">
                            <div class="item-info">
                                <strong th:text="${item.productName}">Produto</strong>
                                <span class="item-qty" th:text="'Qtd: ' + ${item.quantity}">Qtd: 1</span>
                            </div>
                            <div class="item-price" th:text="'R$ ' + ${#numbers.formatDecimal(item.subtotal, 1, 2)}">R$ 100,00</div>
                        </div>
                    </div>
                    
                    <hr>
                    
                    <div class="order-totals">
                        <div class="total-row">
                            <span>Subtotal:</span>
                            <span th:text="'R$ ' + ${#numbers.formatDecimal(order.subtotal, 1, 2)}">R$ 100,00</span>
                        </div>
                        <div class="total-row">
                            <span>Frete:</span>
                            <span class="text-success">Gr√°tis</span>
                        </div>
                        <div class="total-row final-total">
                            <strong>Total:</strong>
                            <strong th:text="'R$ ' + ${#numbers.formatDecimal(order.total, 1, 2)}">R$ 100,00</strong>
                        </div>
                    </div>
                </div>

                <!-- Payment Instructions -->
                <div class="payment-instructions">
                    <!-- Credit Card Payment -->
                    <div th:if="${order.paymentMethod.name() == 'CREDIT_CARD'}" class="payment-method">
                        <h3>üí≥ Pagamento com Cart√£o de Cr√©dito</h3>
                        <div class="payment-info">
                            <div class="info-card">
                                <p><strong>Instru√ß√µes:</strong></p>
                                <ol>
                                    <li>Voc√™ ser√° redirecionado para o processador de pagamentos</li>
                                    <li>Insira os dados do seu cart√£o de cr√©dito</li>
                                    <li>Confirme o pagamento</li>
                                    <li>Aguarde a confirma√ß√£o</li>
                                </ol>
                                
                                <div class="payment-security">
                                    <p>üîí <strong>Pagamento Seguro</strong></p>
                                    <p>Seus dados s√£o protegidos por criptografia SSL</p>
                                </div>
                                
                                <button class="btn btn-primary btn-large" disabled>
                                    üí≥ Pagar com Cart√£o
                                    <small>(Em breve)</small>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Debit Card Payment -->
                    <div th:if="${order.paymentMethod.name() == 'DEBIT_CARD'}" class="payment-method">
                        <h3>üí≥ Pagamento com Cart√£o de D√©bito</h3>
                        <div class="payment-info">
                            <div class="info-card">
                                <p><strong>Instru√ß√µes:</strong></p>
                                <ol>
                                    <li>Voc√™ ser√° redirecionado para o processador de pagamentos</li>
                                    <li>Insira os dados do seu cart√£o de d√©bito</li>
                                    <li>Confirme o pagamento</li>
                                    <li>O valor ser√° debitado imediatamente</li>
                                </ol>
                                
                                <div class="payment-security">
                                    <p>üîí <strong>Pagamento Seguro</strong></p>
                                    <p>Seus dados s√£o protegidos por criptografia SSL</p>
                                </div>
                                
                                <button class="btn btn-primary btn-large" disabled>
                                    üí≥ Pagar com D√©bito
                                    <small>(Em breve)</small>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- PIX Payment -->
                    <div th:if="${order.paymentMethod.name() == 'PIX'}" class="payment-method">
                        <h3>üì± Pagamento via PIX</h3>
                        <div class="payment-info">
                            <div class="info-card">
                                <div class="pix-instructions">
                                    <p><strong>Como pagar:</strong></p>
                                    <ol>
                                        <li>Abra o aplicativo do seu banco</li>
                                        <li>Escolha a op√ß√£o PIX</li>
                                        <li>Escaneie o QR Code ou copie o c√≥digo</li>
                                        <li>Confirme o pagamento</li>
                                    </ol>
                                </div>
                                
                                <div class="pix-qr">
                                    <div class="qr-placeholder">
                                        <div class="qr-code">
                                            üì±<br>
                                            QR CODE<br>
                                            (Simulado)
                                        </div>
                                    </div>
                                    
                                    <div class="pix-code">
                                        <label>C√≥digo PIX:</label>
                                        <div class="code-container">
                                            <input type="text" readonly 
                                                   value="00020126330014BR.GOV.BCB.PIX0114+55119999999990204000053039865802BR5913FILADELFIA STORE6009SAO PAULO61080540900062070503***6304XXXX"
                                                   id="pixCode">
                                            <button class="btn btn-outline btn-sm" onclick="copyPixCode()">
                                                üìã Copiar
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="pix-info">
                                    <p>‚è∞ <strong>Pagamento PIX:</strong> Instant√¢neo</p>
                                    <p>üí° O pedido ser√° confirmado automaticamente ap√≥s o pagamento</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Bank Slip Payment -->
                    <div th:if="${order.paymentMethod.name() == 'BANK_SLIP'}" class="payment-method">
                        <h3>üìÑ Boleto Banc√°rio</h3>
                        <div class="payment-info">
                            <div class="info-card">
                                <div class="boleto-info">
                                    <p><strong>Informa√ß√µes do Boleto:</strong></p>
                                    <div class="boleto-details">
                                        <div class="detail-row">
                                            <span>Valor:</span>
                                            <strong th:text="'R$ ' + ${#numbers.formatDecimal(order.total, 1, 2)}">R$ 100,00</strong>
                                        </div>
                                        <div class="detail-row">
                                            <span>Vencimento:</span>
                                            <strong>3 dias √∫teis</strong>
                                        </div>
                                        <div class="detail-row">
                                            <span>C√≥digo de Barras:</span>
                                            <code>34191.09008 12345.678901 23456.789012 3 98760000010000</code>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="boleto-instructions">
                                    <p><strong>Como pagar:</strong></p>
                                    <ol>
                                        <li>Baixe o boleto clicando no bot√£o abaixo</li>
                                        <li>Pague em qualquer banco, lot√©rica ou internet banking</li>
                                        <li>O prazo de compensa√ß√£o √© de 1 a 3 dias √∫teis</li>
                                        <li>Guarde o comprovante de pagamento</li>
                                    </ol>
                                </div>
                                
                                <button class="btn btn-primary btn-large" disabled>
                                    üìÑ Baixar Boleto
                                    <small>(Em breve)</small>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Shipping Address -->
                    <div class="shipping-info">
                        <h3>üìç Endere√ßo de Entrega</h3>
                        <div class="address-card">
                            <address th:text="${order.fullShippingAddress}">
                                Rua Example, 123 - Bairro
                                Cidade - UF, CEP: 12345-678
                            </address>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="payment-actions">
                <a th:href="@{/orders/my}" class="btn btn-outline">
                    üìã Ver Meus Pedidos
                </a>
                <a th:href="@{/shop}" class="btn btn-secondary">
                    üõçÔ∏è Continuar Comprando
                </a>
            </div>
        </div>
    </main>

    <div th:replace="~{layout :: footer}"></div>
    <div th:replace="~{layout :: scripts}"></div>
    
    <script>
        function copyPixCode() {
            const pixCode = document.getElementById('pixCode');
            pixCode.select();
            pixCode.setSelectionRange(0, 99999);
            document.execCommand('copy');
            
            const button = event.target;
            const originalText = button.innerHTML;
            button.innerHTML = '‚úÖ Copiado!';
            button.classList.add('success');
            
            setTimeout(() => {
                button.innerHTML = originalText;
                button.classList.remove('success');
            }, 2000);
        }
    </script>
</body>
</html>