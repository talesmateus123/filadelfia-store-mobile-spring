<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
    <div th:replace="~{layout :: head}"></div>
    <link th:href="@{/css/login/login.css}" rel="stylesheet"/>
</head>
<body>
    <div class="login-wrapper">
        <div class="login-container">
            <div class="login-header">
                <h2>Bem-vindo de volta!</h2>
                <p>Fa√ßa login para acessar o sistema</p>
            </div>
            
            <!-- Registration success message -->
            <div th:if="${registeredSuccess}" class="alert alert-success">
                <span class="alert-icon">‚úì</span>
                <div class="alert-content">
                    <div class="alert-title">Cadastro conclu√≠do!</div>
                    <a class="alert-message" th:href="@{/login}" th:text="${successMessage}">Cadastro realizado com sucesso!</a>
                </div>
            </div>
            
            <!-- Logout success message -->
            <div th:if="${logoutSuccess}" class="alert alert-success">
                <span class="alert-icon">‚úì</span>
                <div class="alert-content">
                    <div class="alert-title">Sucesso!</div>
                    <p class="alert-message" th:text="${successMessage}">Logout realizado com sucesso!</p>
                </div>
            </div>
            
            <!-- Login error message -->
            <div th:if="${hasError}" class="alert alert-error">
                <span class="alert-icon">‚ö†</span>
                <div class="alert-content">
                    <div class="alert-title">Erro ao fazer login</div>
                    <p class="alert-message" th:text="${errorMessage}">Email ou senha inv√°lidos.</p>
                </div>
            </div>
            
            <form th:action="@{/login}" method="post" class="login-form">
                <div class="form-group">
                    <label for="username">Email</label>
                    <input type="email" 
                           id="username" 
                           name="username" 
                           class="form-control"
                           th:classappend="${hasError} ? 'error'"
                           required 
                           autofocus
                           placeholder="seu@email.com">
                </div>
                
                <div class="form-group">
                    <label for="password">Senha</label>
                    <div class="password-toggle">
                        <input type="password" 
                               id="password" 
                               name="password" 
                               class="form-control"
                               th:classappend="${hasError} ? 'error'"
                               required 
                               placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                        <button type="button" 
                                class="password-toggle-btn" 
                                onclick="togglePassword()"
                                aria-label="Mostrar/ocultar senha">
                            <span id="toggleIcon">üëÅÔ∏è</span>
                        </button>
                    </div>
                    <div style="text-align: right; margin-top: 0.5rem;">
                        <a th:href="@{/forgot-password}" style="color: #007bff; text-decoration: none; font-size: 0.9rem;">
                            Esqueci minha senha
                        </a>
                    </div>
                </div>
                
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                
                <button type="submit" class="btn-login">Entrar</button>
            </form>
            
            <div class="login-footer">
                <p>N√£o tem uma conta? <a th:href="@{/register}">Cadastre-se aqui</a></p>
                <p><a th:href="@{/}">‚Üê Voltar para a p√°gina inicial</a></p>
            </div>
        </div>
    </div>
    <script th:src="@{/js/login/login.js}"></script>
    
    <div th:replace="~{layout :: footer}"></div>
</body>
</html>